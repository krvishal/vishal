<html>
<head>
  <meta charset="utf-8">
  <title>TODO List </title>
  <script src="js/react.min.js"></script>
  <script src="js/react-dom.min.js"></script>
  <script src="js/babel.min.js"></script>
  <script src="bootstrap/jquery-3.1.1.js"></script>
  <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <script src="bootstrap/lodash.js"></script>
</head>
<body>
  <div class="container" style="margin-top:100px">
      <div class="col-md-3"></div>
        <div id="container"></div>
  </div>
  <script type="text/babel">

      class Row extends React.Component{
        constructor(){
            super();
            this.handleChange=this.handleChange.bind(this);
        }
        handleChange(e){
          let checkBadge=this.props.list[e].marked==false?true:false;
          this.props.list[e].marked=checkBadge;
        }
        render(){
          let output=this.props.list;
          let i = 0;
          let Badge=<span className="badge">Completed</span>;
          if(this.props.list[i].marked!=true)
          {
            Badge="";
          }
          console.log(this.props.list);
          return(
            <li className="list-group-item" id={this.props.list[i].key}>
            <input type="checkbox" onClick={()=>this.handleChange(i)} checked={this.props.list[i].marked}  className="form-check-input"/>    {this.props.list[i].name} {Badge}
             </li>
          );
        }
      }
      class List extends React.Component{
        render(){
        var listRow=<Row list={this.props.name} />;
        var listTodo=this.props.name==""?"":listRow;
        return(
          <ul className="list-group">
          <label>TODO App</label>
          <br />
            {listTodo}
          </ul>
        );
        }
      }
      //add form
    class AddTodo extends React.Component{
      constructor(props){
        super(props);

        //this.addTodo=this.addTodo.bind(this);
        //this.handleClick=this.handleClick.bind(this);
      }
      // addTodo(e){
      //   this.setState({input : e.target.value});
      // }
      //  handleClick(e){
      //     e.preventDefault();
      //     let name= this.state.input;
      //     this.props.handleClick(name);
      //     this.setState({input:''});
      //  }
      render(){
        return(
          <form>
            <div className="form-group">
              <input type='text' className="form-control" name="newName" onChange={()=>this.props.getName}  placeholder="Your Todo.." />
            </div>
            <button type="submit" className="btn btn-default" onClick={this.handleClick} >Submit</button>
          </form>
        );
      }
    }
    //display result
    class InputText extends React.Component{
    constructor(props){
      super(props);
      this.list={
        name:'',
        marked:false,
        key:0
      };
      this.state={
        todoList:[{name:'birthday',marked:true,key:1},{name:'abc',marked:false,key:2}],
        currList:_.clone(this.list)
      };
      this.getName=this.getName.bind(this);
    }
    getName (newName){
        let data=this.state.currList;
        console.log("data"+data);
        console.log(newName);
        data.name=newName;
        let keyValue=1;
        let id=this.state.todoList;
        id=map(id,(e)=>{ keyValue++; });
        data.key=keyValue;
        console.log(keyValue);
        let todoList=this.state.todoList.slice();
        todoList.push(data);
        this.setState({
          todoList:todoList,
          currList:_.clone(this.list)
        });
      }
      render(){
        console.log(this.state.todoList);
        console.log(this.state.currList);
        return(
          <div className="col-md-5" >
            <List name={this.state.todoList} />
            <AddTodo  onChange={this.getName}/>
          </div>
        );
      }
    }

    ReactDOM.render(<InputText />,document.getElementById('container'));
  </script>
</body>
</html>
